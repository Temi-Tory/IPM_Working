<mat-sidenav-container class="sidenav-container">
  <!-- Side Navigation -->
  <mat-sidenav
    #sidenav
    mode="side"
    [opened]="isExpanded"
    class="sidenav"
    [class.sidenav-collapsed]="!isExpanded">
    
    <!-- Header -->
    <div class="sidenav-header">
      <div class="logo-container" [class.collapsed]="!isExpanded">
        <mat-icon class="logo-icon">analytics</mat-icon>
        <span class="logo-text" *ngIf="isExpanded">Info Prop Framework</span>
      </div>
      <button
        mat-icon-button
        class="toggle-btn"
        (click)="toggleSidebar()"
        [attr.aria-label]="isExpanded ? 'Collapse sidebar' : 'Expand sidebar'">
        <mat-icon>{{ isExpanded ? 'chevron_left' : 'chevron_right' }}</mat-icon>
      </button>
    </div>

    <!-- Navigation Items -->
    <mat-nav-list class="nav-list">
      <mat-list-item
        *ngFor="let item of navItems()"
        class="nav-item"
        [class.nav-item-disabled]="isItemDisabled(item)"
        [routerLink]="isItemDisabled(item) ? null : item.route"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: false }"
        (click)="onNavItemClick(item)"
        [matTooltip]="getTooltipText(item)"
        [matTooltipDisabled]="!isItemDisabled(item)"
        matTooltipPosition="right"
        [attr.aria-disabled]="isItemDisabled(item)"
        [attr.tabindex]="isItemDisabled(item) ? -1 : 0">
        
        <mat-icon 
          matListItemIcon 
          class="nav-icon"
          [class.nav-icon-disabled]="isItemDisabled(item)">
          {{ item.icon }}
        </mat-icon>
        
        <span 
          matListItemTitle 
          class="nav-label" 
          [class.nav-label-disabled]="isItemDisabled(item)"
          *ngIf="isExpanded">
          {{ item.label }}
        </span>
        
        <!-- Tooltip for collapsed state -->
        <div class="nav-tooltip" *ngIf="!isExpanded">
          {{ getTooltipText(item) }}
        </div>

        <!-- Disabled indicator -->
        <mat-icon 
          *ngIf="isItemDisabled(item) && isExpanded"
          class="disabled-indicator"
          matTooltip="{{ item.disabledReason }}">
          lock
        </mat-icon>
      </mat-list-item>
    </mat-nav-list>

    <!-- Graph Status Indicator -->
    <div class="sidenav-status" *ngIf="isExpanded">
      <div class="status-content">
        <div class="status-item" [class.status-loaded]="isGraphLoaded()">
          <mat-icon class="status-icon">
            {{ isGraphLoaded() ? 'check_circle' : 'radio_button_unchecked' }}
          </mat-icon>
          <span class="status-text">
            {{ isGraphLoaded() ? 'Graph Loaded' : 'No Graph' }}
          </span>
        </div>
        
        <div class="status-item" 
             [class.status-loaded]="hasAnalysisResults()"
             *ngIf="isGraphLoaded()">
          <mat-icon class="status-icon">
            {{ hasAnalysisResults() ? 'analytics' : 'pending_actions' }}
          </mat-icon>
          <span class="status-text">
            {{ hasAnalysisResults() ? 'Analysis Complete' : 'Analysis Pending' }}
          </span>
        </div>

        <div class="status-item"
             [class.status-loaded]="hasDiamonds()"
             *ngIf="isGraphLoaded()">
          <mat-icon class="status-icon">
            {{ hasDiamonds() ? 'diamond' : 'crop_square' }}
          </mat-icon>
          <span class="status-text">
            {{ hasDiamonds() ? 'Diamonds Found' : 'No Diamonds' }}
          </span>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="sidenav-footer" *ngIf="isExpanded">
      <div class="footer-content">
        <mat-icon class="footer-icon">info</mat-icon>
        <span class="footer-text">v1.0.0</span>
      </div>
    </div>
  </mat-sidenav>

  <!-- Main Content Area -->
  <mat-sidenav-content class="main-content">
    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>