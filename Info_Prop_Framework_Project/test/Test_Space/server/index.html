<!DOCTYPE html>
<html>
<head>
    <title>Information Propagation Framework Toolkit</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div class="container">
        <h1>Information Propagation Framework Toolkit</h1>
        
        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="analysis">Analysis</button>
            <button class="tab-btn" data-tab="visualization">Visualization</button>
        </div>
        
        <!-- Analysis Tab -->
        <div id="analysis-tab" class="tab-content active">
            <div class="upload-section">
                <h3>Upload Network File</h3>
                <input type="file" id="fileInput" accept=".csv">
                <div id="fileStatus"></div>
            </div>
            
            <div class="parameters">
                <h3>Analysis Parameters</h3>
                
                <div class="parameter-group">
                    <label>Node Prior: <input type="range" id="nodePrior" min="0.1" max="1" step="0.1" value="1.0"> <span id="nodeValue">1.0</span></label>
                    <label class="checkbox-label"><input type="checkbox" id="overrideNodePrior"> Override all node priors with this value</label>
                </div>
                
                <div class="parameter-group">
                    <label>Edge Probability: <input type="range" id="edgeProb" min="0.1" max="1" step="0.1" value="0.9"> <span id="edgeValue">0.9</span></label>
                    <label class="checkbox-label"><input type="checkbox" id="overrideEdgeProb"> Override all edge probabilities with this value</label>
                </div>
                
                <div class="options">
                    <label class="checkbox-label"><input type="checkbox" id="includeClassification"> Include Diamond Classification</label>
                </div>
            </div>
            
            <button id="analyzeBtn" disabled>Analyze Network</button>
            
            <div id="loading" style="display: none;">
                <p>Running analysis...</p>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
            </div>
            
            <div id="results" style="display: none;">
                <h3>Analysis Results</h3>
                <div id="summary"></div>
                
                <h4>Node Probabilities</h4>
                <table id="resultsTable">
                    <thead>
                        <tr><th>Node</th><th>Probability</th></tr>
                    </thead>
                    <tbody></tbody>
                </table>
                
                <div id="classification" style="display: none;">
                    <h4>Diamond Classifications</h4>
                    <div id="classificationResults"></div>
                </div>
            </div>
            
            <div id="error" style="display: none;"></div>
        </div>
        
        <!-- Visualization Tab -->
        <div id="visualization-tab" class="tab-content">
            <div class="viz-controls">
                <h3>Visualization Options</h3>
                <div class="control-group">
                    <label class="checkbox-label"><input type="checkbox" id="showSourceNodes" checked> Highlight Source Nodes</label>
                    <label class="checkbox-label"><input type="checkbox" id="showSinkNodes" checked> Highlight Sink Nodes</label>
                    <label class="checkbox-label"><input type="checkbox" id="showForkNodes"> Highlight Fork Nodes</label>
                    <label class="checkbox-label"><input type="checkbox" id="showJoinNodes"> Highlight Join Nodes</label>
                    <label class="checkbox-label"><input type="checkbox" id="showIterations"> Color by Iteration Sets</label>
                </div>
                <div class="control-group">
                    <label>Layout: 
                        <select id="layoutSelect">
                            <option value="hierarchical">Hierarchical</option>
                            <option value="force">Force-Directed</option>
                            <option value="circular">Circular</option>
                        </select>
                    </label>
                    <button id="resetZoom">Reset View</button>
                    <button id="fitToScreen">Fit to Screen</button>
                    <button id="exportDot">Export DOT</button>
                </div>
            </div>
            
            <div id="visualization-container">
                <div id="network-graph"></div>
                <div id="node-details">
                    <h4>Node Details</h4>
                    <div id="selected-node-info">Click a node to see details</div>
                </div>
            </div>
            
            <div id="viz-legend">
                <h4>Legend</h4>
                <div class="legend-items">
                    <div class="legend-item"><span class="legend-color source"></span> Source Nodes</div>
                    <div class="legend-item"><span class="legend-color sink"></span> Sink Nodes</div>
                    <div class="legend-item"><span class="legend-color fork"></span> Fork Nodes</div>
                    <div class="legend-item"><span class="legend-color join"></span> Join Nodes</div>
                    <div class="legend-item"><span class="legend-color ancestor"></span> Ancestors</div>
                    <div class="legend-item"><span class="legend-color descendant"></span> Descendants</div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>